<!doctype html>
<html>
  <head>
    <meta charset = "utf-8">
    <title>å´´å¯¶</title>
    <link rel="icon" href="IMG_7558.PNG">
  </head>
  <body>
      hello world
  </body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>ğŸ–±ï¸ 26å¼µæ‰‹æŒ‡è¿½è¹¤</title>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: Arial; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white; 
            overflow: hidden; 
            height: 100vh;
        }
        #canvas { 
            width: 100vw !important; 
            height: 100vh !important; 
            cursor: crosshair; 
            display: block; 
        }
        .ui {
            position: fixed; 
            top: 20px; 
            left: 20px; 
            z-index: 100;
            background: rgba(0,0,0,0.7); 
            padding: 15px; 
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
    </style>
</head>
<body>
    <div class="ui">
        <h1>ğŸ–±ï¸ æ‰‹æŒ‡è¿½è¹¤</h1>
        <div>å¡«å…¥26å¼µç…§ç‰‡ï¼Œæ‰‹æŒ‡è‡ªå‹•è¿½è¹¤é¼ æ¨™</div>
    </div>
    <canvas id="canvas"></canvas>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let hands = null;
        let mouseX = 0.5, mouseY = 0.5;
        let photos = [];
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        // ğŸ”¥ 26å¼µç…§ç‰‡ä½ç½®ï¼ˆåªæ”¹ srcï¼‰
        const defaultPhotos = [
            { src: 'IMG_8150.JPG', name: '1' },'               
            { src: 'IMG_8151.JPG', name: '2' },
            { src: 'IMG_8152.JPG', name: '3' },
            { src: 'IMG_8153.JPG', name: '4' },
            { src: 'IMG_8154.JPG', name: '5' },
            { src: 'IMG_8155.JPG', name: '6' },
            { src: 'IMG_8156.JPG', name: '7' },
            { src: 'IMG_8157.JPG', name: '8' },
            { src: 'IMG_8158.JPG', name: '9' },
            { src: 'IMG_8159.JPG', name: '10' },
            { src: 'IMG_8160.JPG', name: '11' },
            { src: 'IMG_8161.JPG', name: '12' },
            { src: 'IMG_8162.JPG', name: '13' },
            { src: 'IMG_8163.JPG', name: '14' },
            { src: 'IMG_8164.JPG', name: '15' },
            { src: 'IMG_8165.JPG', name: '16' },
            { src: 'IMG_8166.JPG', name: '17' },
            { src: 'IMG_8167.JPG', name: '18' },
            { src: 'IMG_8168.JPG', name: '19' },
            { src: 'IMG_8169.JPG', name: '20' },
            { src: 'IMG_8170.JPG', name: '21' },
            { src: 'IMG_8171.JPG', name: '22' },
            { src: 'IMG_8172.JPG', name: '23' },
            { src: 'IMG_8173.JPG', name: '24' },
            { src: 'IMG_8174.JPG', name: '25' },
            { src: 'IMG_8175.JPG', name: '26' }
        ];

        async function initHands() {
            hands = new window.Hands({locateFile: (file) => {
                return `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`;
            }});
            hands.setOptions({
                maxNumHands: 1,
                modelComplexity: 0,
                minDetectionConfidence: 0.8,
                minTrackingConfidence: 0.5
            });
            hands.onResults(() => render());
        }

        async function loadPhotos() {
            for (let photoData of defaultPhotos) {
                const img = new Image();
                await new Promise(resolve => {
                    img.onload = async () => {
                        const detectCanvas = document.createElement('canvas');
                        const detectCtx = detectCanvas.getContext('2d');
                        detectCanvas.width = 640;
                        detectCanvas.height = 480;
                        detectCtx.drawImage(img, 0, 0, 640, 480);
                        
                        try {
                            const results = await hands.send({image: detectCanvas});
                            photos.push({
                                img: img,
                                landmarks: results.multiHandLandmarks?.[0] || null,
                                detectScaleX: img.naturalWidth / 640,
                                detectScaleY: img.naturalHeight / 480,
                                name: photoData.name
                            });
                        } catch(e) {
                            photos.push({img: img, landmarks: null, name: photoData.name});
                        }
                        resolve();
                    };
                    img.crossOrigin = 'anonymous';
                    img.src = photoData.src;
                });
            }
            render();
        }

        window.onmousemove = (e) => {
            mouseX = e.clientX / window.innerWidth;
            mouseY = e.clientY / window.innerHeight;
            render();
        };

        function render() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            if (photos.length === 0) return;

            const randomPhoto = photos[Math.floor(Math.random() * photos.length)];
            if (!randomPhoto.img) return;

            const scaleX = canvas.width / randomPhoto.img.naturalWidth;
            const scaleY = canvas.height / randomPhoto.img.naturalHeight;
            const scale = Math.max(scaleX, scaleY);
            const imgW = randomPhoto.img.naturalWidth * scale;
            const imgH = randomPhoto.img.naturalHeight * scale;
            const imgX = (canvas.width - imgW) / 2;
            const imgY = (canvas.height - imgH) / 2;

            // åªé¡¯ç¤ºç…§ç‰‡ï¼ˆéš±è—ç´…é»ç¶ ç·šï¼‰
            ctx.save();
            ctx.shadowColor = 'rgba(0,0,0,0.4)';
            ctx.shadowBlur = 30;
            ctx.shadowOffsetY = 15;
            ctx.drawImage(randomPhoto.img, imgX, imgY, imgW, imgH);
            ctx.restore();

            // éš±è—æ‰‹æŒ‡è¿½è¹¤ç·šæ¢å’Œç´…é»
            if (randomPhoto.landmarks) {
                const targetX = mouseX * canvas.width;
                const targetY = mouseY * canvas.height;
                const mouseDetectX = (targetX - imgX) / scale / randomPhoto.detectScaleX;
                const mouseDetectY = (targetY - imgY) / scale / randomPhoto.detectScaleY;
                const adjusted = adjustHandPrecise(randomPhoto.landmarks, mouseDetectX, mouseDetectY);
                // ä¸ç¹ªè£½ç¶ ç·šå’Œé»
            }
            // ä¸ç¹ªè£½ç´…è‰²é¼ æ¨™é»
        }

        function adjustHandPrecise(landmarks, targetDetectX, targetDetectY) {
            const adjusted = [];
            const tip = landmarks[8];
            const dx = targetDetectX - tip.x;
            const dy = targetDetectY - tip.y;
            const angle = Math.atan2(dy, dx);
            const cosA = Math.cos(angle);
            const sinA = Math.sin(angle);

            for (let landmark of landmarks) {
                const px = landmark.x - tip.x;
                const py = landmark.y - tip.y;
                adjusted.push({
                    x: tip.x + px * cosA - py * sinA,
                    y: tip.y + px * sinA + py * cosA,
                    z: landmark.z
                });
            }
            return adjusted;
        }

        initHands().then(loadPhotos);
        render();
    </script>
</body>
</html>
