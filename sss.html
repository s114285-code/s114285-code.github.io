<!doctype html>
<html>
  <head>
    <meta charset = "utf-8">
    <title>å´´å¯¶</title>
    <link rel="icon" href="IMG_7558.PNG">
  </head>
  <body>
      hello world
  </body>
</html>
<!DOCTYPE html>
<html>
<!DOCTYPE html>
<html>
<head>
    <title>ğŸ–±ï¸ å…¨å±æ‰‹æŒ‡è¿½è¹¤</title>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: Arial; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            overflow: hidden;
            height: 100vh;
        }
        #canvas { 
            width: 100vw !important; 
            height: 100vh !important; 
            cursor: crosshair; 
            border-radius: 0;
            display: block;
        }
        .ui {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 100;
            background: rgba(0,0,0,0.7);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        h1 { font-size: 1.8em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }
        .instructions { font-size: 14px; max-width: 300px; line-height: 1.4; }
        code { background: rgba(255,255,255,0.2); padding: 2px 4px; border-radius: 3px; }
    </style>
</head>
<body>
    <div class="ui">
        <h1>ğŸ–±ï¸ å…¨å±æ‰‹æŒ‡è¿½è¹¤</h1>
        <div class="instructions">
            <strong>ğŸ”¥ ç…§ç‰‡ä½ç½®ï¼š</strong><br>
            æ‰¾åˆ° <code>defaultPhotos</code> é™£åˆ—<br>
            æ›¿æ› <code>src: 'https://...'</code><br>
            ä¸Šå‚³åˆ° <a href="https://imgur.com" style="color: #fff;">Imgur</a>
        </div>
    </div>
    <canvas id="canvas"></canvas>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let hands = null;
        let mouseX = 0.5, mouseY = 0.5;
        let photos = [];
        
        // ğŸ”¥ å…¨å±å°ºå¯¸èª¿æ•´
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        // ğŸ”¥ é€™è£¡æ”¾ä½ çš„ç…§ç‰‡é€£çµï¼
        const defaultPhotos = [
            {
                src: 'https://images.unsplash.com/photo-1574169208507-84376144848b?w=1200',
                name: 'æ‰‹å‹¢1'
            },
            {
                src: 'https://images.unsplash.com/photo-1587829741301-dc798b83addb?w=1200', 
                name: 'æ‰‹å‹¢2'
            },
            {
                src: 'https://images.unsplash.com/photo-1518098268026-4e266b1f3cd8?w=1200',
                name: 'æ‰‹å‹¢3'
            },
            {
                src: 'https://images.unsplash.com/photo-1600844164376-7857e4d8a9a6?w=1200',
                name: 'æ‰‹å‹¢4'
            },
            {
                src: 'https://images.unsplash.com/photo-1600844164376-7857e4d8a9a6?w=1200',
                name: 'æ‰‹å‹¢5' 
            },
            {
                src: 'https://images.unsplash.com/photo-1600844164376-7857e4d8a9a6?w=1200',
                name: 'æ‰‹å‹¢6' 
            },
            {
                src: 'https://images.unsplash.com/photo-1600844164376-7857e4d8a9a6?w=1200',
                name: 'æ‰‹å‹¢7'
            }
        ];

        // åˆå§‹åŒ– MediaPipe
        async function initHands() {
            hands = new window.Hands({locateFile: (file) => {
                return `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`;
            }});
            hands.setOptions({
                maxNumHands: 1,
                modelComplexity: 0,
                minDetectionConfidence: 0.8,
                minTrackingConfidence: 0.5
            });
            hands.onResults(() => render());
        }

        // è¼‰å…¥ç…§ç‰‡
        async function loadPhotos() {
            for (let photoData of defaultPhotos) {
                const img = new Image();
                await new Promise(resolve => {
                    img.onload = async () => {
                        const tempCanvas = document.createElement('canvas');
                        const tempCtx = tempCanvas.getContext('2d');
                        tempCanvas.width = 640;
                        tempCanvas.height = 480;
                        tempCtx.drawImage(img, 0, 0, 640, 480);
                        
                        try {
                            const results = await hands.send({image: tempCanvas});
                            photos.push({
                                img: img,
                                landmarks: results.multiHandLandmarks?.[0] || null,
                                name: photoData.name
                            });
                        } catch(e) {
                            photos.push({img: img, landmarks: null, name: photoData.name});
                        }
                        resolve();
                    };
                    img.crossOrigin = 'anonymous';
                    img.src = photoData.src;
                });
            }
            render();
        }

        // å…¨å±é¼ æ¨™è¿½è¹¤
        window.onmousemove = (e) => {
            mouseX = e.clientX / window.innerWidth;
            mouseY = e.clientY / window.innerHeight;
            render();
        };

        // å…¨å±æ¸²æŸ“
        function render() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            if (photos.length === 0) {
                ctx.fillStyle = 'rgba(255,255,255,0.9)';
                ctx.font = 'bold 48px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('è¼‰å…¥ä¸­...', canvas.width/2, canvas.height/2);
                return;
            }

            const randomPhoto = photos[Math.floor(Math.random() * photos.length)];
            if (!randomPhoto.img) return;

            // ğŸ”¥ å…¨å±å¡«æ»¿ç…§ç‰‡
            const scaleX = canvas.width / randomPhoto.img.width;
            const scaleY = canvas.height / randomPhoto.img.height;
            const scale = Math.max(scaleX, scaleY); // æ‹‰ä¼¸å¡«æ»¿
            const imgW = randomPhoto.img.width * scale;
            const imgH = randomPhoto.img.height * scale;
            const imgX = (canvas.width - imgW) / 2;
            const imgY = (canvas.height - imgH) / 2;

            // å…¨å±ç…§ç‰‡ + é™°å½±
            ctx.save();
            ctx.shadowColor = 'rgba(0,0,0,0.4)';
            ctx.shadowBlur = 30;
            ctx.shadowOffsetY = 15;
            ctx.drawImage(randomPhoto.img, imgX, imgY, imgW, imgH);
            ctx.restore();

            // æ‰‹æŒ‡è¿½è¹¤
            if (randomPhoto.landmarks) {
                const targetX = mouseX * canvas.width;
                const targetY = mouseY * canvas.height;
                const adjusted = adjustHand(randomPhoto.landmarks, targetX, targetY, imgX, imgY, scale);
                drawHand(ctx, adjusted);
            }

            // ğŸ”¥ å…¨å±è„ˆå‹•é¼ æ¨™é»
            const pulse = Math.sin(Date.now() * 0.015) * 0.5 + 0.5;
            ctx.save();
            ctx.shadowColor = '#FF4444';
            ctx.shadowBlur = 40 + pulse * 20;
            ctx.fillStyle = `rgba(255, 50, 50, ${0.9 + pulse * 0.1})`;
            ctx.beginPath();
            ctx.arc(targetX, targetY, 20 + pulse * 15, 0, 2 * Math.PI);
            ctx.fill();
            ctx.restore();

            // ç…§ç‰‡åç¨±ï¼ˆå·¦ä¸Šè§’ï¼‰
            ctx.fillStyle = 'rgba(255,255,255,0.95)';
            ctx.font = 'bold 32px Arial';
            ctx.textAlign = 'left';
            ctx.shadowColor = 'rgba(0,0,0,0.5)';
            ctx.shadowBlur = 10;
            ctx.shadowOffsetY = 3;
            ctx.fillText(randomPhoto.name, 30, 60);
        }

        function adjustHand(landmarks, targetX, targetY, imgX, imgY, scale) {
            const adjusted = [];
            const tip = landmarks[8];
            const origTipX = tip.x * scale + imgX;
            const origTipY = tip.y * scale + imgY;
            const angle = Math.atan2(targetY - origTipY, targetX - origTipX);
            const cosA = Math.cos(angle);
            const sinA = Math.sin(angle);

            for (let landmark of landmarks) {
                const origX = landmark.x * scale + imgX;
                const origY = landmark.y * scale + imgY;
                const dx = origX - origTipX;
                const dy = origY - origTipY;
                const rotatedX = origTipX + dx * cosA - dy * sinA;
                const rotatedY = origTipY + dx * sinA + dy * cosA;
                adjusted.push({
                    x: (rotatedX - imgX) / scale,
                    y: (rotatedY - imgY) / scale,
                    z: landmark.z
                });
            }
            return adjusted;
        }

        function drawHand(ctx, landmarks) {
            ctx.strokeStyle = 'rgba(0, 255, 0, 0.95)';
            ctx.lineWidth = 6;
            ctx.lineCap = 'round';
            
            const connections = [
                [0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],
                [0,9],[9,10],[10,11],[11,12],[0,13],[13,14],[14,15],[15,16],
                [0,17],[17,18],[18,19],[19,20],[5,9],[9,13],[13,17]
            ];
            
            connections.forEach(([i1, i2]) => {
                ctx.beginPath();
                ctx.moveTo(landmarks[i1].x * canvas.width, landmarks[i1].y * canvas.height);
                ctx.lineTo(landmarks[i2].x * canvas.width, landmarks[i2].y * canvas.height);
                ctx.stroke();
            });
            
            ctx.fillStyle = 'rgba(255, 255, 255, 1)';
            landmarks.forEach(landmark => {
                ctx.shadowColor = '#00FF00';
                ctx.shadowBlur = 15;
                ctx.beginPath();
                ctx.arc(landmark.x * canvas.width, landmark.y * canvas.height, 10, 0, 2 * Math.PI);
                ctx.fill();
            });
            ctx.shadowBlur = 0;
        }

        // å•Ÿå‹•
        initHands().then(loadPhotos);
        render();
    </script>
</body>
</html>
